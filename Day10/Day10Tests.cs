using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Shouldly;

namespace Day10
{
    [TestClass]
    public class Day10Tests
    {
        [TestMethod]
        public void Example1Test()
        {
            var map = @"
.#..#
.....
#####
....#
...##";

            MonitoringStation.CalculateBestStation(map).maxNumberOfVisible.ShouldBe(8);
        }

        [TestMethod]
        public void Example2Test()
        {
            var map = @"
.#..#..###
####.###.#
....###.#.
..###.##.#
##.##.#.#.
....###..#
..#.#..#.#
#..#.#.###
.##...##.#
.....#.#..";

            MonitoringStation.CalculateBestStation(map).maxNumberOfVisible.ShouldBe(41);
        }

        [TestMethod]
        public void Part2Example1Test()
        {
            var map = @"
.#....#####...#..
##...##.#####..##
##...#...#.#####.
..#.....#...###..
..#.#.....#....##
";

            MonitoringStation.DoGiantLaserStuff(map, (8, 3));


        }


        [TestMethod]
        public void Day10()
        {
            var map = @"
.............#..#.#......##........#..#
.#...##....#........##.#......#......#.
..#.#.#...#...#...##.#...#.............
.....##.................#.....##..#.#.#
......##...#.##......#..#.......#......
......#.....#....#.#..#..##....#.......
...................##.#..#.....#.....#.
#.....#.##.....#...##....#####....#.#..
..#.#..........#..##.......#.#...#....#
...#.#..#...#......#..........###.#....
##..##...#.#.......##....#.#..#...##...
..........#.#....#.#.#......#.....#....
....#.........#..#..##..#.##........#..
........#......###..............#.#....
...##.#...#.#.#......#........#........
......##.#.....#.#.....#..#.....#.#....
..#....#.###..#...##.#..##............#
...##..#...#.##.#.#....#.#.....#...#..#
......#............#.##..#..#....##....
.#.#.......#..#...###...........#.#.##.
........##........#.#...#.#......##....
.#.#........#......#..........#....#...
...............#...#........##..#.#....
.#......#....#.......#..#......#.......
.....#...#.#...#...#..###......#.##....
.#...#..##................##.#.........
..###...#.......#.##.#....#....#....#.#
...#..#.......###.............##.#.....
#..##....###.......##........#..#...#.#
.#......#...#...#.##......#..#.........
#...#.....#......#..##.............#...
...###.........###.###.#.....###.#.#...
#......#......#.#..#....#..#.....##.#..
.##....#.....#...#.##..#.#..##.......#.
..#........#.......##.##....#......#...
##............#....#.#.....#...........
........###.............##...#........#
#.........#.....#..##.#.#.#..#....#....
..............##.#.#.#...........#.....";


            var station = MonitoringStation.CalculateBestStation(map);
            Console.WriteLine($"Placing laser at {station.bestAsteroid}, where {station.maxNumberOfVisible} asteroids are visible.");
            Console.WriteLine(MonitoringStation.DoGiantLaserStuff(map, station.bestAsteroid));
        }

    }
}
